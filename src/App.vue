<template>
  <div @wheel="windowAddMouseWheel">
    <div class="logo">
      <el-button
        class="logo-btn"
        type="primary"
        :circle="true"
        :size="60"
        @click="changeDrawerStatus"
      >
        <el-avatar
          :class="{ listening: this.$store.state.isPlaying }"
          :size="60"
        >
          <svg
            t="1648304605578"
            class="icon"
            viewBox="0 0 1024 1024"
            version="1.1"
            xmlns="http://www.w3.org/2000/svg"
            p-id="3517"
            width="60"
            height="60"
          >
            <path
              d="M508.7 927.6c-56.2 0-110.6-11-161.9-32.7-49.5-21-94-50.9-132.2-89.1-38.2-38.2-68.2-82.7-89.1-132.2-21.7-51.3-32.7-105.8-32.7-161.9 0-56.2 11-110.6 32.7-161.9 21-49.5 50.9-94 89.1-132.2 38.2-38.2 82.7-68.2 132.2-89.1 51.3-21.7 105.8-32.7 161.9-32.7s110.6 11 161.9 32.7c49.5 21 94 50.9 132.2 89.1 38.2 38.2 68.2 82.7 89.1 132.2 21.7 51.3 32.7 105.8 32.7 161.9 0 56.2-11 110.6-32.7 161.9-21 49.5-50.9 94-89.1 132.2-38.2 38.2-82.7 68.2-132.2 89.1-51.2 21.7-105.7 32.7-161.9 32.7z m0-800c-51.8 0-102.1 10.2-149.5 30.2-45.7 19.3-86.8 47-122.1 82.3s-63 76.3-82.3 122.1c-20 47.3-30.2 97.6-30.2 149.5 0 51.8 10.2 102.1 30.2 149.5 19.3 45.7 47 86.8 82.3 122.1s76.3 63 122.1 82.3c47.3 20 97.6 30.2 149.5 30.2s102.1-10.2 149.5-30.2c45.7-19.3 86.8-47 122.1-82.3s63-76.3 82.3-122.1c20-47.3 30.2-97.6 30.2-149.5 0-51.8-10.2-102.1-30.2-149.5-19.3-45.7-47-86.8-82.3-122.1s-76.3-63-122.1-82.3c-47.3-20-97.6-30.2-149.5-30.2z"
              fill=""
              p-id="3518"
            ></path>
            <path
              d="M710.4 540h-400V286.3c0-6.9 6.8-11.7 13.3-9.4l159.2 55.7c17.8 6.2 37.2 6.2 55 0l159.2-55.7c6.5-2.3 13.3 2.6 13.3 9.4V540z"
              fill="#FFA625"
              p-id="3519"
            ></path>
            <path
              d="M726.4 556h-432V286.3c0-8.4 4.1-16.3 11-21.2 6.9-4.9 15.7-6.1 23.6-3.3l159.2 55.7c14.3 5 30.1 5 44.4 0l159.2-55.7c7.9-2.8 16.8-1.5 23.6 3.3 6.9 4.9 11 12.8 11 21.2V556z m-400-32h368V294.7l-151.2 52.9c-21.1 7.4-44.4 7.4-65.5 0l-151.2-52.9V524z"
              fill="#231F20"
              p-id="3520"
            ></path>
            <path
              d="M565.1 740H456.3c-80.1 0-145.6-65.5-145.6-145.6V485.6c0-80.1 65.5-145.6 145.6-145.6h108.8c80.1 0 145.6 65.5 145.6 145.6v108.8c0 80.1-65.5 145.6-145.6 145.6z"
              fill="#FFA625"
              p-id="3521"
            ></path>
            <path
              d="M565.1 756H456.3c-43 0-83.5-16.9-114.1-47.5-30.6-30.6-47.5-71.1-47.5-114.1V485.6c0-43 16.9-83.5 47.5-114.1S413.3 324 456.3 324h108.8c43 0 83.5 16.9 114.1 47.5 30.6 30.6 47.5 71.1 47.5 114.1v108.8c0 43-16.9 83.5-47.5 114.1-30.5 30.6-71.1 47.5-114.1 47.5zM456.3 356c-34.5 0-67 13.5-91.5 38.1s-38.1 57.1-38.1 91.5v108.8c0 34.5 13.5 67 38.1 91.5 24.6 24.6 57.1 38.1 91.5 38.1h108.8c34.5 0 67-13.5 91.5-38.1 24.6-24.6 38.1-57.1 38.1-91.5V485.6c0-34.5-13.5-67-38.1-91.5-24.6-24.6-57.1-38.1-91.5-38.1H456.3z"
              fill="#231F20"
              p-id="3522"
            ></path>
            <path
              d="M460.3 727.5h100.2c73.8 0 134.1-60.4 134.1-134.1v-2.8c-6.2-1.1-12.6-1.7-19.1-1.7-29.1 0-55.6 11.3-75.3 29.8-18.9-33.2-54.6-55.5-95.5-55.5-37.6 0-70.7 18.9-90.5 47.6-18.4-13.8-41.2-21.9-65.9-21.9-7.6 0-15 0.8-22.2 2.2v2.2c0.1 73.8 60.4 134.2 134.2 134.2z"
              fill="#FFFFFF"
              p-id="3523"
            ></path>
            <path
              d="M467.3 610.5a40.6 25.3 0 1 0 81.2 0 40.6 25.3 0 1 0-81.2 0Z"
              fill=""
              p-id="3524"
            ></path>
            <path
              d="M470.8 439.4l-2-7.4c-4-15.1-22.9-20.1-33.9-9.1-11 11-6 29.9 9.1 33.9l7.4 2c11.8 3.2 22.6-7.6 19.4-19.4zM551.5 439.4l2-7.4c4-15.1 22.9-20.1 33.9-9.1 11 11 6 29.9-9.1 33.9l-7.4 2c-11.7 3.2-22.5-7.6-19.4-19.4z"
              fill="#FFFFFF"
              p-id="3525"
            ></path>
            <path
              d="M463.3 683.9c-27.6 0-50-22.4-50-50 0-4.4 3.6-8 8-8s8 3.6 8 8c0 18.7 15.2 34 34 34s34-15.2 34-34c0-4.4 3.6-8 8-8s8 3.6 8 8c0 27.5-22.4 50-50 50z"
              fill=""
              p-id="3526"
            ></path>
            <path
              d="M548.5 683.9c-27.6 0-50-22.4-50-50 0-4.4 3.6-8 8-8s8 3.6 8 8c0 18.7 15.2 34 34 34s34-15.2 34-34c0-4.4 3.6-8 8-8s8 3.6 8 8c0 27.5-22.4 50-50 50z"
              fill=""
              p-id="3527"
            ></path>
            <path
              d="M395.6 530.1c-3.8 0-7.6-1.3-10.6-4-6.6-5.9-7.2-16-1.3-22.6 25.5-28.7 69.7-31.3 98.4-5.8 6.6 5.9 7.2 16 1.3 22.6-5.9 6.6-16 7.2-22.6 1.3-15.5-13.8-39.4-12.4-53.2 3.1-3.2 3.6-7.6 5.4-12 5.4zM551 529.1c-4.1 0-8.2-1.5-11.3-4.6-6.3-6.2-6.3-16.4-0.1-22.6 27.1-27.3 71.3-27.4 98.6-0.3 6.3 6.2 6.3 16.4 0.1 22.6-6.2 6.3-16.4 6.3-22.6 0.1-14.7-14.6-38.7-14.6-53.3 0.2-3.2 3-7.3 4.6-11.4 4.6z"
              fill="#231F20"
              p-id="3528"
            ></path>
          </svg>
        </el-avatar>
      </el-button>
    </div>
    <el-drawer v-model="openDrawer" :direction="'rtl'" :size="200">
      <template #title>
        <h4>频道</h4>
      </template>
      <template #default>
        <div class="link-box">
          <link-avatar :address="'/home'" :title="'陈燕和她的导盲犬'">
            <svg
              t="1648310426919"
              class="icon"
              viewBox="0 0 1024 1024"
              version="1.1"
              xmlns="http://www.w3.org/2000/svg"
              p-id="2659"
              width="100"
              height="100"
            >
              <path
                d="M512 864c-172.8 0-304-64-304-153.6 0-60.8 64-112 169.6-137.6 16-3.2 35.2 6.4 38.4 22.4 3.2 16-6.4 35.2-22.4 38.4-76.8 19.2-118.4 51.2-118.4 73.6 0 35.2 92.8 89.6 240 89.6s240-51.2 240-89.6c0-22.4-41.6-57.6-118.4-73.6-16-3.2-28.8-22.4-22.4-38.4 3.2-16 22.4-28.8 38.4-22.4 105.6 25.6 169.6 76.8 169.6 137.6C816 800 684.8 864 512 864z"
                fill="#333333"
                p-id="2660"
              ></path>
              <path
                d="M512 752c-12.8 0-25.6-9.6-32-22.4l-160-544c-6.4-16 3.2-35.2 22.4-38.4 16-6.4 35.2 3.2 38.4 22.4l160 544c6.4 16-3.2 35.2-22.4 38.4H512z"
                fill="#F5AA19"
                p-id="2661"
              ></path>
              <path
                d="M528 451.2c-67.2 0-99.2-9.6-102.4-9.6-16-3.2-28.8-22.4-22.4-38.4 3.2-16 22.4-28.8 38.4-22.4 0 0 51.2 12.8 150.4 3.2 44.8-3.2 83.2-19.2 105.6-32l-41.6-57.6c-3.2-6.4-6.4-12.8-6.4-19.2V227.2c-22.4 12.8-48 28.8-80 35.2-32 9.6-67.2 0-96-6.4-25.6-6.4-57.6-12.8-64-3.2-9.6 12.8-32 16-44.8 6.4-12.8-9.6-16-32-6.4-44.8 32-41.6 86.4-28.8 128-19.2 25.6 6.4 51.2 12.8 67.2 6.4 67.2-19.2 105.6-64 105.6-64 9.6-9.6 22.4-16 35.2-9.6 12.8 3.2 22.4 16 22.4 32l-3.2 108.8 54.4 76.8c9.6 12.8 6.4 32-6.4 41.6-3.2 3.2-64 54.4-166.4 60.8-25.6 3.2-48 3.2-67.2 3.2z"
                fill="#F5AA19"
                p-id="2662"
              ></path>
            </svg>
          </link-avatar>
          <link-avatar :address="'/about'" :title="'二维码'">
            <svg
              t="1648310484016"
              class="icon"
              viewBox="0 0 1024 1024"
              version="1.1"
              xmlns="http://www.w3.org/2000/svg"
              p-id="2815"
              width="100"
              height="100"
            >
              <path
                d="M426.666667 955.733333H238.933333c-75.093333 0-136.533333-61.44-136.533333-136.533333v-187.733333c0-20.48 13.653333-34.133333 34.133333-34.133334h290.133334c20.48 0 34.133333 13.653333 34.133333 34.133334V921.6c0 20.48-13.653333 34.133333-34.133333 34.133333zM170.666667 665.6V819.2c0 37.546667 30.72 68.266667 68.266666 68.266667h153.6v-221.866667H170.666667zM426.666667 494.933333H136.533333c-20.48 0-34.133333-13.653333-34.133333-34.133333V273.066667c0-75.093333 61.44-136.533333 136.533333-136.533334h187.733334c20.48 0 34.133333 13.653333 34.133333 34.133334v290.133333c0 20.48-13.653333 34.133333-34.133333 34.133333z m-256-68.266666h221.866666V204.8H238.933333c-37.546667 0-68.266667 30.72-68.266666 68.266667v153.6zM887.466667 494.933333h-290.133334c-20.48 0-34.133333-13.653333-34.133333-34.133333V170.666667c0-20.48 13.653333-34.133333 34.133333-34.133334H785.066667c75.093333 0 136.533333 61.44 136.533333 136.533334v187.733333c0 20.48-13.653333 34.133333-34.133333 34.133333z m-256-68.266666H853.333333V273.066667c0-37.546667-30.72-68.266667-68.266666-68.266667h-153.6v221.866667z"
                fill="#333333"
                p-id="2816"
              ></path>
              <path
                d="M853.333333 955.733333c-20.48 0-34.133333-13.653333-34.133333-34.133333v-290.133333c0-20.48 13.653333-34.133333 34.133333-34.133334s34.133333 13.653333 34.133334 34.133334V921.6c0 20.48-13.653333 34.133333-34.133334 34.133333zM631.466667 955.733333c-20.48 0-34.133333-13.653333-34.133334-34.133333v-290.133333c0-20.48 13.653333-34.133333 34.133334-34.133334s34.133333 13.653333 34.133333 34.133334V921.6c0 20.48-13.653333 34.133333-34.133333 34.133333z"
                fill="#FFAF00"
                p-id="2817"
              ></path>
            </svg>
          </link-avatar>
          <link-avatar :address="'/map'" :title="'导盲犬地图'">
            <svg
              t="1648310545565"
              class="icon"
              viewBox="0 0 1024 1024"
              version="1.1"
              xmlns="http://www.w3.org/2000/svg"
              p-id="2982"
              width="100"
              height="100"
            >
              <path
                d="M887.466667 955.733333H136.533333c-13.653333 0-23.893333-6.826667-30.72-17.066666-6.826667-10.24-6.826667-23.893333 0-34.133334L215.04 716.8c10.24-17.066667 30.72-20.48 47.786667-13.653333 17.066667 10.24 20.48 30.72 13.653333 47.786666l-78.506667 136.533334h631.466667L750.933333 750.933333c-10.24-17.066667-3.413333-37.546667 13.653334-47.786666 17.066667-10.24 37.546667-3.413333 47.786666 13.653333l109.226667 187.733333c6.826667 10.24 6.826667 23.893333 0 34.133334-10.24 10.24-20.48 17.066667-34.133333 17.066666z"
                fill="#333333"
                p-id="2983"
              ></path>
              <path
                d="M512 819.2c-6.826667 0-13.653333-3.413333-20.48-6.826667-10.24-6.826667-266.24-197.973333-266.24-392.533333C228.693333 262.826667 354.986667 136.533333 512 136.533333s286.72 126.293333 286.72 286.72c0 194.56-252.586667 382.293333-266.24 392.533334-6.826667 0-13.653333 3.413333-20.48 3.413333z m0-614.4c-119.466667 0-218.453333 95.573333-218.453333 218.453333 0 119.466667 139.946667 259.413333 215.04 320.853334 58.026667-47.786667 218.453333-187.733333 218.453333-320.853334C730.453333 300.373333 631.466667 204.8 512 204.8z"
                fill="#333333"
                p-id="2984"
              ></path>
              <path
                d="M518.826667 552.96c-71.68 0-133.12-58.026667-133.12-133.12 0-71.68 58.026667-133.12 133.12-133.12 71.68 0 133.12 58.026667 133.12 133.12-3.413333 75.093333-61.44 133.12-133.12 133.12z m0-228.693333c-54.613333 0-98.986667 44.373333-98.986667 98.986666 0 54.613333 44.373333 98.986667 98.986667 98.986667 54.613333 0 98.986667-44.373333 98.986666-98.986667-3.413333-54.613333-44.373333-98.986667-98.986666-98.986666z"
                fill="#FFAF00"
                p-id="2985"
              ></path>
            </svg>
          </link-avatar>
        </div>
      </template>
    </el-drawer>
    <!-- 播放器 -->
    <div
      class="audio-box"
      :style="{
        width: this.$store.state.windowWidth * showAudioPlayer + 'px',
      }"
    >
      <audio-player
        v-show="showAudioPlayerBox"
        :music-urls="audioSources"
      ></audio-player>
    </div>
    <router-view />
  </div>
</template>


<script>
// import {AOS} from 'aos';
import LinkAvatar from "./components/main/LinkAvatar.vue";
import AudioPlayer from "@/components/audio/AudioPlayer";

export default {
  components: { LinkAvatar, AudioPlayer },
  name: "App",
  data() {
    return {
      scrollDirection: "",
      openDrawer: false,
      routerLinks: [
        {
          name: "Main",
          title: "主页",
          path: "",
        },
        {
          name: "Home",
          title: "首页",
          path: "home",
        },
        {
          name: "map",
          title: "导盲犬地图",
          path: "map",
        },
      ],
      nowLinkIndex: 0,
      audioSources: [
        require("@/assets/audio/1.mp3"),
        require("@/assets/audio/2.mp3"),
        require("@/assets/audio/3.mp3"),
        require("@/assets/audio/4.mp3"),
        require("@/assets/audio/5.mp3"),
        require("@/assets/audio/6.mp3"),
      ],
      showAudioPlayer: 0,
      showAudioPlayerBox: false,
    };
  },
  mounted() {
    this.reloadChange();
  },
  methods: {
    windowAddMouseWheel(event) {
      var routerGo = "";
      if (event.deltaY > 0) {
        this.scrollDirection = "down";
        // routerGo = this.routerLinks[this.nowLinkIndex].path;
        this.nowLinkIndex = (this.nowLinkIndex + 1) % this.routerLinks.length;
        this.$router.push({
          path: "/" + this.routerLinks[this.nowLinkIndex].path,
        });
        console.log("向下滚动");
      } else if (event.deltaY < 0) {
        this.scrollDirection = "up";
        console.log("向上滚动");
        if (this.routerLinks > 0) {
          this.nowLinkIndex = (this.nowLinkIndex + 1) % this.routerLinks.length;
        } else {
          this.nowLinkIndex = 0;
        }
        this.$router.push({
          path: "/" + this.routerLinks[this.nowLinkIndex].path,
        });
      }
    },
    //改变抽屉状态
    changeDrawerStatus() {
      // this.openDrawer = !this.openDrawer;
      if(this.showAudioPlayerBox){
        setTimeout(() => {
          this.showAudioPlayerBox = false;
        }, 200);
        this.showAudioPlayer = 0
      }else{
        setTimeout(()=>{
          this.showAudioPlayerBox = true;
        },200)
        this.showAudioPlayer = 1
      }
    },
    //监听窗口大小变化
    reloadChange() {
      this.$store.commit("setWindowWidth", window.innerWidth);
      this.$store.commit("setWindowHeight", window.innerHeight);
      window.onresize = () => {
        this.$store.commit("setWindowWidth", window.innerWidth);
        this.$store.commit("setWindowHeight", window.innerHeight);
      };
    },
  },
};
</script>
<style scoped>
.logo {
  position: absolute;
  bottom: 0%;
  left: 0%;
  height: 90px;
  width: 100px;
  z-index: 4;
  display: flex;
  align-items: center;
}
.logo-btn {
  margin: 0px;
  margin-left: 10px;
  margin-right: 20px;
  height: 60px;
  padding: 0px !important;
}
.hint {
  --animate-duration: 2s;
  font-weight: 500;
}
.link-box {
  width: 100%;
  display: flex;
  flex-direction: column;
  align-content: space-around;
}
.audio-box {
  position: absolute;
  bottom: 0px;
  z-index: 3;
  background: #9c3636ab;
  transition: all 0.5s;
}
.listening {
  animation: listening 1.1s infinite linear;
}
@keyframes listening {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}
</style>
